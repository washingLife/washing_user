  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateWaybills (20171117063134)
  [1m[35m (442.0ms)[0m  [1m[35mCREATE TABLE `waybills` (`id` int AUTO_INCREMENT PRIMARY KEY, `order_id` int, `status` varchar(255), `sender_type` varchar(255), `sender_id` int, `from_address_id` int, `receiver_type` varchar(255), `receiver_id` int, `to_address_id` int, `exp_time` datetime, `actual_time` datetime, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_waybills_on_order_id`  (`order_id`),  INDEX `index_waybills_on_sender_type_and_sender_id`  (`sender_type`, `sender_id`),  INDEX `index_waybills_on_from_address_id`  (`from_address_id`),  INDEX `index_waybills_on_receiver_type_and_receiver_id`  (`receiver_type`, `receiver_id`),  INDEX `index_waybills_on_to_address_id`  (`to_address_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (30.9ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20171117063134')[0m
  [1m[35m (33.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-03 15:20:10 +0800
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (9.0ms)
  Rendered devise/sessions/new.html.slim within layouts/application (475.1ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 19499ms (Views: 19370.5ms | ActiveRecord: 7.1ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2017-12-03 15:25:57 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"MRT3Ruiug4DGc6SBOlMu5n9/d9LLByGHhxKq43mQvpHHl7BNcN6G0iTMIwyXdHba8vviGr/MLcJmKXvbEzOJ/g==", "user"=>{"email"=>"1026276393@qq.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`email` = '1026276393@qq.com' ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (26.1ms)[0m  [1m[33mUPDATE `users` SET `current_sign_in_at` = '2017-12-03 07:25:57', `last_sign_in_at` = '2017-12-02 12:26:56', `sign_in_count` = 6, `updated_at` = '2017-12-03 07:25:57' WHERE `users`.`id` = 1[0m
  [1m[35m (30.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 310ms (ActiveRecord: 57.5ms)


Started GET "/" for 127.0.0.1 at 2017-12-03 15:25:57 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (73.9ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 294ms (Views: 202.7ms | ActiveRecord: 4.0ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-12-03 15:25:59 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (1.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-03') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (24.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (3.5ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (3.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (3.1ms)
  Rendered categories/show.html.slim within layouts/application (92.8ms)
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 270ms (Views: 219.6ms | ActiveRecord: 13.0ms)


Started GET "/orders/new?category=1" for 127.0.0.1 at 2017-12-03 15:26:01 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.0ms)


  
ActiveRecord::StatementInvalid (Mysql2::Error: Table 'ruby_course.orders' doesn't exist: SHOW FULL FIELDS FROM `orders`):
  
app/controllers/orders_controller.rb:17:in `new'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (447.6ms)
Started GET "/categories/1" for 127.0.0.1 at 2017-12-03 15:26:14 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-03') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (6.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  Rendered categories/show.html.slim within layouts/application (69.4ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 199ms (Views: 178.6ms | ActiveRecord: 2.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-03 15:26:18 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (7.0ms)
  Rendered layouts/_menu.html.slim (3.0ms)
Completed 200 OK in 116ms (Views: 108.0ms | ActiveRecord: 1.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-03 15:26:20 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (2.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (36.7ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (3.0ms)
Completed 200 OK in 152ms (Views: 141.4ms | ActiveRecord: 3.0ms)


  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20171203021159)
  [1m[35m (307.2ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `user_address_id` int, `total_price` float, `courier_status` varchar(255), `voucher_status` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_user_address_id`  (`user_address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_118f518b6c`
FOREIGN KEY (`user_address_id`)
  REFERENCES `user_addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateWaybills (20171117063134)
  [1m[35m (190.9ms)[0m  [1m[35mDROP TABLE `waybills`[0m
  [1m[35mSQL (82.2ms)[0m  [1m[31mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20171117063134'[0m
Migrating to CreateOrders (20171117021159)
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE `orders`[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateWaybills (20171117063134)
  [1m[35m (340.9ms)[0m  [1m[35mCREATE TABLE `waybills` (`id` int AUTO_INCREMENT PRIMARY KEY, `order_id` int, `status` varchar(255), `sender_type` varchar(255), `sender_id` int, `from_address_id` int, `receiver_type` varchar(255), `receiver_id` int, `to_address_id` int, `exp_time` datetime, `actual_time` datetime, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_waybills_on_order_id`  (`order_id`),  INDEX `index_waybills_on_sender_type_and_sender_id`  (`sender_type`, `sender_id`),  INDEX `index_waybills_on_from_address_id`  (`from_address_id`),  INDEX `index_waybills_on_receiver_type_and_receiver_id`  (`receiver_type`, `receiver_id`),  INDEX `index_waybills_on_to_address_id`  (`to_address_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20171117063134')[0m
  [1m[35m (27.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20171203075029)
  [1m[35m (319.2ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `user_address_id` int, `total_price` float, `courier_status` varchar(255), `voucher_status` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_user_address_id`  (`user_address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_118f518b6c`
FOREIGN KEY (`user_address_id`)
  REFERENCES `user_addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-03 15:54:36 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

):
  
activerecord (5.0.6) lib/active_record/migration.rb:573:in `check_pending!'
activerecord (5.0.6) lib/active_record/migration.rb:549:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.6) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.6) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.6) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.6) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.6) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.6) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.6) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.0.6) lib/rails/engine.rb:522:in `call'
puma (3.10.0) lib/puma/configuration.rb:225:in `call'
puma (3.10.0) lib/puma/server.rb:605:in `handle_request'
puma (3.10.0) lib/puma/server.rb:437:in `process_client'
puma (3.10.0) lib/puma/server.rb:301:in `block in run'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `call'
puma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (934.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20171203075029)
  [1m[35m (310.3ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `user_address_id` int, `total_price` float, `courier_status` varchar(255), `voucher_status` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_user_address_id`  (`user_address_id`), CONSTRAINT `fk_rails_3dd05aae5e`
FOREIGN KEY (`category_id`)
  REFERENCES `categories` (`id`)
, CONSTRAINT `fk_rails_f868b47f6a`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_118f518b6c`
FOREIGN KEY (`user_address_id`)
  REFERENCES `user_addresses` (`id`)
) ENGINE=InnoDB[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateOrders (20171203075029)
  [1m[35m (353.7ms)[0m  [1m[35mCREATE TABLE `orders` (`id` int AUTO_INCREMENT PRIMARY KEY, `category_id` int, `user_id` int, `user_address_id` int, `total_price` float, `courier_status` varchar(255), `voucher_status` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_orders_on_category_id`  (`category_id`),  INDEX `index_orders_on_user_id`  (`user_id`),  INDEX `index_orders_on_user_address_id`  (`user_address_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20171203075029')[0m
  [1m[35m (28.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `orders`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'orders'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (1.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (2.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-03 16:04:26 +0800
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 83ms (ActiveRecord: 16.0ms)


Started GET "/" for 127.0.0.1 at 2017-12-03 16:04:39 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (7.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (134.9ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 1093ms (Views: 1028.8ms | ActiveRecord: 2.0ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-12-03 16:04:43 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-03') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (20.9ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  Rendered categories/show.html.slim within layouts/application (97.4ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 276ms (Views: 228.8ms | ActiveRecord: 7.0ms)


Started GET "/orders/new?category=1" for 127.0.0.1 at 2017-12-03 16:04:45 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (1.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (225.7ms)
  Rendered orders/new.html.slim within layouts/application (251.7ms)
  Rendered layouts/_menu.html.slim (7.0ms)
Completed 200 OK in 560ms (Views: 531.1ms | ActiveRecord: 7.0ms)


Started GET "/orders" for 127.0.0.1 at 2017-12-03 16:04:55 +0800
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendering orders/index.html.slim within layouts/application
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`user_id` = 1 ORDER BY `orders`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  Rendered orders/index.html.slim within layouts/application (9.0ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 160ms (Views: 142.5ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-03 16:04:59 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (46.8ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (9.0ms)
Completed 200 OK in 199ms (Views: 187.4ms | ActiveRecord: 0.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-03 16:05:01 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (8.0ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 135ms (Views: 128.7ms | ActiveRecord: 0.0ms)


Started GET "/user_addresses" for 127.0.0.1 at 2017-12-03 16:05:04 +0800
Processing by UserAddressesController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendering user_addresses/index.html.slim within layouts/application
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered user_addresses/index.html.slim within layouts/application (9.6ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 142ms (Views: 130.0ms | ActiveRecord: 1.0ms)


Started GET "/user_addresses/new" for 127.0.0.1 at 2017-12-03 16:05:05 +0800
Processing by UserAddressesController#new as HTML
  Rendering user_addresses/new.html.slim within layouts/application
  Rendered user_addresses/_form.html.slim (19.1ms)
  Rendered user_addresses/new.html.slim within layouts/application (30.3ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 174ms (Views: 151.1ms | ActiveRecord: 3.0ms)


Started GET "/addresses/suggestion.json?term=%E5%A4%A9%E6%B4%A5&_type=query&q=%E5%A4%A9%E6%B4%A5&_=1512288280937" for 127.0.0.1 at 2017-12-03 16:05:19 +0800
Processing by AddressesController#suggestion as JSON
  Parameters: {"term"=>"å¤©æ´¥", "_type"=>"query", "q"=>"å¤©æ´¥", "_"=>"1512288280937"}
Completed 200 OK in 310ms (Views: 1.8ms | ActiveRecord: 0.0ms)


Started POST "/user_addresses" for 127.0.0.1 at 2017-12-03 16:05:25 +0800
Processing by UserAddressesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"0HQTMwDfaQGCohM61I5RX6Oo5xpj0xlToo1eO3KzcJB6DOPnwtQbX1O5CIqXTxf8hFbyOpCbJ76FT0fxEIOesQ==", "user_address"=>{"name"=>"å¤©æ´¥", "address_attributes"=>{"address"=>"å¤©æ´¥å¸‚", "comment"=>"", "lat"=>"39.090908", "lng"=>"117.205914"}}, "commit"=>"Create User address"}
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (47.5ms)[0m  [1m[32mINSERT INTO `user_addresses` (`user_id`, `name`, `created_at`, `updated_at`, `city_id`) VALUES (1, 'å¤©æ´¥', '2017-12-03 08:05:25', '2017-12-03 08:05:25', 1)[0m
  [1m[35mSQL (226.3ms)[0m  [1m[32mINSERT INTO `addresses` (`address`, `lat`, `lng`, `comment`, `addressable_type`, `addressable_id`, `created_at`, `updated_at`) VALUES ('å¤©æ´¥å¸‚', 39.090908, 117.205914, '', 'UserAddress', 2, '2017-12-03 08:05:25', '2017-12-03 08:05:25')[0m
  [1m[35m (26.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user_addresses
Completed 302 Found in 378ms (ActiveRecord: 302.5ms)


Started GET "/user_addresses" for 127.0.0.1 at 2017-12-03 16:05:26 +0800
Processing by UserAddressesController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendering user_addresses/index.html.slim within layouts/application
  [1m[36mUserAddress Load (1.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  Rendered user_addresses/index.html.slim within layouts/application (74.8ms)
  Rendered layouts/_menu.html.slim (10.0ms)
Completed 200 OK in 595ms (Views: 554.0ms | ActiveRecord: 3.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-03 16:05:29 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (8.2ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 136ms (Views: 126.1ms | ActiveRecord: 0.0ms)


Started GET "/user_addresses" for 127.0.0.1 at 2017-12-03 16:05:30 +0800
Processing by UserAddressesController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendering user_addresses/index.html.slim within layouts/application
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  Rendered user_addresses/index.html.slim within layouts/application (14.0ms)
  Rendered layouts/_menu.html.slim (3.0ms)
Completed 200 OK in 152ms (Views: 140.0ms | ActiveRecord: 2.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-03 16:05:31 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (8.0ms)
  Rendered layouts/_menu.html.slim (3.0ms)
Completed 200 OK in 126ms (Views: 118.8ms | ActiveRecord: 1.0ms)


Started GET "/messages" for 127.0.0.1 at 2017-12-03 16:05:32 +0800
Processing by MessagesController#index as HTML
  Rendering messages/index.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered messages/index.html.slim within layouts/application (9.0ms)
  Rendered layouts/_menu.html.slim (9.0ms)
Completed 200 OK in 151ms (Views: 144.0ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-03 16:05:33 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (46.3ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 186ms (Views: 173.1ms | ActiveRecord: 2.0ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-12-03 16:05:38 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (1.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-03') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (3.5ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  Rendered categories/show.html.slim within layouts/application (78.5ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 228ms (Views: 206.6ms | ActiveRecord: 5.0ms)


Started GET "/orders/new?category=1" for 127.0.0.1 at 2017-12-03 16:05:40 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (24.1ms)
  Rendered orders/new.html.slim within layouts/application (34.1ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 174ms (Views: 163.5ms | ActiveRecord: 1.0ms)


Started POST "/orders" for 127.0.0.1 at 2017-12-03 16:05:44 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"MlaaVJ70FdTfrKqraoGd7wIIC6+KLcneTnfv86PjQTzwawQCCZAxLAQVsOIi6rJr4ST67E9Tz6G92fEaYc9RBQ==", "order"=>{"category_id"=>"1", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (6.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mUserAddress Load (1.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (37.1ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`) VALUES (1, 1, 2, 'new', '2017-12-03 08:05:44', '2017-12-03 08:05:44')[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (12.9ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (18.8ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 2[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (1, 'new', 'User', 1, 9, 'Courier', 2, 2, '2017-12-03 08:05:44', '2017-12-03 08:05:44')[0m
  [1m[35m (49.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/orders/1
Completed 302 Found in 506ms (ActiveRecord: 145.7ms)


Started GET "/orders/1" for 127.0.0.1 at 2017-12-03 16:05:44 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 1 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (2.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 1[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 2 LIMIT 1[0m
  [1m[36mAddress Load (2.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 2 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (105.5ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 492ms (Views: 444.3ms | ActiveRecord: 10.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-03 16:06:10 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (23.6ms)
  Rendered layouts/_menu.html.slim (15.0ms)
Completed 200 OK in 521ms (Views: 495.2ms | ActiveRecord: 1.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-08 16:53:57 +0800
  [1m[36mActiveRecord::SchemaMigration Load (52.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (16.0ms)
  Rendered devise/sessions/new.html.slim within layouts/application (678.0ms)
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 4308ms (Views: 4141.2ms | ActiveRecord: 44.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-08 16:54:22 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  Rendered home/user.html.slim within layouts/application (4.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 146ms (Views: 138.6ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 16:54:23 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (40.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (10.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (170.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 448ms (Views: 260.8ms | ActiveRecord: 70.2ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-08 16:54:27 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  Rendered home/user.html.slim within layouts/application (4.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 123ms (Views: 117.1ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-08 16:54:28 +0800
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (4.0ms)
  Rendered devise/sessions/new.html.slim within layouts/application (24.0ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 152ms (Views: 151.2ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2017-12-08 16:54:29 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"E9qZDYHx7ZAsGSRDZU0OPanf8O2Asn0x18wDgfG2u0VMOTI7KCx8gLXA+TRjpAdeRYGZpXRgwMXnv0vv+9lSiQ==", "user"=>{"email"=>"1026276393@qq.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (56.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`email` = '1026276393@qq.com' ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (16.0ms)[0m  [1m[33mUPDATE `users` SET `current_sign_in_at` = '2017-12-08 08:54:30', `last_sign_in_at` = '2017-12-03 07:25:57', `sign_in_count` = 7, `updated_at` = '2017-12-08 08:54:30' WHERE `users`.`id` = 1[0m
  [1m[35m (192.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 836ms (ActiveRecord: 264.0ms)


Started GET "/" for 127.0.0.1 at 2017-12-08 16:54:30 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (56.0ms)
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 264ms (Views: 237.6ms | ActiveRecord: 8.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-08 16:54:36 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (8.0ms)
  Rendered layouts/_menu.html.slim (10.0ms)
Completed 200 OK in 132ms (Views: 123.7ms | ActiveRecord: 0.0ms)


Started GET "/user_addresses" for 127.0.0.1 at 2017-12-08 16:54:38 +0800
Processing by UserAddressesController#index as HTML
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendering user_addresses/index.html.slim within layouts/application
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  Rendered user_addresses/index.html.slim within layouts/application (130.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 351ms (Views: 290.9ms | ActiveRecord: 30.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 16:54:45 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (52.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.4ms)
Completed 200 OK in 181ms (Views: 167.4ms | ActiveRecord: 4.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-08 16:54:46 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (8.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 116ms (Views: 112.5ms | ActiveRecord: 0.0ms)


Started GET "/messages" for 127.0.0.1 at 2017-12-08 16:54:47 +0800
Processing by MessagesController#index as HTML
  Rendering messages/index.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered messages/index.html.slim within layouts/application (0.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 144ms (Views: 117.6ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 16:54:49 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (10.0ms)
  Rendered categories/index.html.slim within layouts/application (58.1ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 206ms (Views: 191.4ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 16:54:55 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (44.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 192ms (Views: 175.8ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 16:56:17 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (52.0ms)
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 268ms (Views: 196.5ms | ActiveRecord: 12.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-08 16:56:57 +0800
  [1m[36mActiveRecord::SchemaMigration Load (4.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 84ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2017-12-08 16:57:10 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (68.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 880ms (Views: 827.5ms | ActiveRecord: 4.0ms)


Started GET "/cable" for 127.0.0.1 at 2017-12-08 17:02:21 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-12-08 17:02:21 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "KefuChannel"
Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-08 17:02:30 +0800
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 148ms (ActiveRecord: 4.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-12-08 17:02:42 +0800
Started GET "/cable" for 127.0.0.1 at 2017-12-08 17:02:42 +0800
Started GET "/cable" for 127.0.0.1 at 2017-12-08 17:02:42 +0800
Started GET "/" for 127.0.0.1 at 2017-12-08 17:02:42 +0800
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-12-08 17:02:42 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2017-12-08 17:02:42 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by CategoriesController#index as HTML
Subscription class not found: "KefuChannel"
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-12-08 17:02:42 +0800
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (8.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (116.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 768ms (Views: 690.1ms | ActiveRecord: 0.0ms)


Finished "/cable/" [WebSocket] for 127.0.0.1 at 2017-12-08 17:02:43 +0800
Started GET "/categories/1" for 127.0.0.1 at 2017-12-08 17:02:48 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (4.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-08') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (10.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (70.0ms)
  [1m[36mPrice Load (10.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (10.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (10.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (10.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (10.0ms)
  [1m[36mPrice Load (10.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (10.0ms)
  Rendered categories/show.html.slim within layouts/application (260.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 670ms (Views: 482.2ms | ActiveRecord: 145.0ms)


Started GET "/orders/new?category=1" for 127.0.0.1 at 2017-12-08 17:02:56 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (150.0ms)
  Rendered orders/new.html.slim within layouts/application (150.0ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 374ms (Views: 335.6ms | ActiveRecord: 16.4ms)


Started POST "/orders" for 127.0.0.1 at 2017-12-08 17:03:03 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"+Nt/D44Mo8mu9nv/5PHLRWEAqgQhgVn7Sb5j+6j6UgxSe2j7kZy+j/y8p+8TDOPQqG7Vtvirg59/xRyqwvAUVA==", "order"=>{"category_id"=>"1", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mUserAddress Load (4.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (52.1ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`) VALUES (1, 1, 2, 'new', '2017-12-08 09:03:03', '2017-12-08 09:03:03')[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (0.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (12.0ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 4[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (4.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 4 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35mSQL (24.0ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (2, 'new', 'User', 1, 9, 'Courier', 7, 7, '2017-12-08 09:03:03', '2017-12-08 09:03:03')[0m
  [1m[35m (42.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/orders/2
Completed 302 Found in 468ms (ActiveRecord: 174.1ms)


Started GET "/orders/2" for 127.0.0.1 at 2017-12-08 17:03:04 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mOrder Load (4.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 2 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (4.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 2[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (4.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (4.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 7 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (84.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (16.0ms)
Completed 200 OK in 564ms (Views: 500.6ms | ActiveRecord: 16.0ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-08 17:03:16 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (4.1ms)
  Rendered layouts/_menu.html.slim (10.0ms)
Completed 200 OK in 118ms (Views: 109.6ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 17:03:17 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (34.1ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 168ms (Views: 161.7ms | ActiveRecord: 4.0ms)


Started GET "/categories/2" for 127.0.0.1 at 2017-12-08 17:03:19 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (4.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 2 AND (city_id = 1 and from_date <= '2017-12-08') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 2 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 8 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 9 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 10 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 11 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 12 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 7 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  Rendered categories/show.html.slim within layouts/application (70.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 190ms (Views: 175.4ms | ActiveRecord: 4.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-08 18:11:04 +0800
  [1m[36mActiveRecord::SchemaMigration Load (4.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 76ms (ActiveRecord: 8.0ms)


Started GET "/" for 127.0.0.1 at 2017-12-08 18:11:16 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (44.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (24.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (88.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 780ms (Views: 601.0ms | ActiveRecord: 68.1ms)


Started PUT "/users/change_current_city?city_id=2" for 127.0.0.1 at 2017-12-08 18:11:21 +0800
Processing by UsersController#change_current_city as HTML
  Parameters: {"authenticity_token"=>"Y0NM51ryKqu1zPwxjlVRWZpheiMXUvcr1QdNJwJLzAr0SL+BXgZtiEKN1rvvk2MCylW6vqgx41j9Ra/RKclR6g==", "city_id"=>"2"}
DEPRECATION WARNING: `redirect_to :back` is deprecated and will be removed from Rails 5.1. Please use `redirect_back(fallback_location: fallback_location)` where `fallback_location` represents the location to use if the request has no HTTP referer information. (called from change_current_city at E:/work/yonghu-week12/app/controllers/users_controller.rb:4)
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2017-12-08 18:11:21 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 2 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 2 AND `categories`.`is_del` = 0[0m
  Rendered categories/index.html.slim within layouts/application (12.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 140ms (Views: 129.0ms | ActiveRecord: 0.0ms)


Started PUT "/users/change_current_city?city_id=1" for 127.0.0.1 at 2017-12-08 18:11:23 +0800
Processing by UsersController#change_current_city as HTML
  Parameters: {"authenticity_token"=>"La/MCDZKcITzaS0F3vAnO3OSNjCNyccjSlEOis7rpjS6pD9uMr43pwQoB4+/NhVgI6b2rTKq01BiE+x85Wk71A==", "city_id"=>"1"}
DEPRECATION WARNING: `redirect_to :back` is deprecated and will be removed from Rails 5.1. Please use `redirect_back(fallback_location: fallback_location)` where `fallback_location` represents the location to use if the request has no HTTP referer information. (called from change_current_city at E:/work/yonghu-week12/app/controllers/users_controller.rb:4)
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2017-12-08 18:11:23 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (4.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (8.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (100.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 345ms (Views: 318.8ms | ActiveRecord: 4.0ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-12-08 18:11:25 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (16.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-08') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (14.2ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (45.4ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  Rendered categories/show.html.slim within layouts/application (217.3ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 418ms (Views: 362.3ms | ActiveRecord: 30.2ms)


Started GET "/orders/new?category=1" for 127.0.0.1 at 2017-12-08 18:11:31 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (12.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (39.4ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (150.7ms)
  Rendered orders/new.html.slim within layouts/application (158.7ms)
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 402ms (Views: 333.2ms | ActiveRecord: 55.4ms)


Started POST "/orders" for 127.0.0.1 at 2017-12-08 18:11:40 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"JoaOwUfWy8Mq01W3Jf4tKR5jOKmhVvjeXFIbx8EhhgSMJpk1WEbWhXiZiafSAwW81w1HG3h8IrpqKWSWqyvAXA==", "order"=>{"category_id"=>"1", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (44.0ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`) VALUES (1, 1, 2, 'new', '2017-12-08 10:11:40', '2017-12-08 10:11:40')[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (8.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (36.0ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 4[0m
  [1m[36mAddress Load (4.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 4 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35mSQL (36.0ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (3, 'new', 'User', 1, 9, 'Courier', 8, 7, '2017-12-08 10:11:40', '2017-12-08 10:11:40')[0m
  [1m[35m (32.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/orders/3
Completed 302 Found in 388ms (ActiveRecord: 160.1ms)


Started GET "/orders/3" for 127.0.0.1 at 2017-12-08 18:11:41 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 3 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 3[0m
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (4.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 8 LIMIT 1[0m
  [1m[36mAddress Load (4.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (80.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (12.0ms)
Completed 200 OK in 528ms (Views: 479.0ms | ActiveRecord: 12.0ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-12-08 18:11:47 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-08') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (4.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  Rendered categories/show.html.slim within layouts/application (76.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 220ms (Views: 197.4ms | ActiveRecord: 8.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-12-08 18:11:52 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (31.3ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 167ms (Views: 156.4ms | ActiveRecord: 0.0ms)


Started GET "/categories/2" for 127.0.0.1 at 2017-12-08 18:11:53 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 2 AND (city_id = 1 and from_date <= '2017-12-08') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 2 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 8 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 9 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 10 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 11 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 12 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 7 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  Rendered categories/show.html.slim within layouts/application (46.9ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 173ms (Views: 165.8ms | ActiveRecord: 0.0ms)


Started GET "/orders/new?category=2" for 127.0.0.1 at 2017-12-08 18:11:55 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"2"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (15.6ms)
  Rendered orders/new.html.slim within layouts/application (23.8ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 139ms (Views: 132.0ms | ActiveRecord: 0.0ms)


Started POST "/orders" for 127.0.0.1 at 2017-12-08 18:11:58 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"TOwIwwmDUT99Lx79OYNSQ4n/wjm1z4zHokWHiOhcNczmTB83FhNMeS9lwu3OfnrWQJG9i2zlVqOUPvjZglZzlA==", "order"=>{"category_id"=>"2", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (44.0ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`) VALUES (2, 1, 2, 'new', '2017-12-08 10:11:58', '2017-12-08 10:11:58')[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (0.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 2[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35mSQL (4.0ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (4, 'new', 'User', 1, 9, 'Courier', 5, 2, '2017-12-08 10:11:58', '2017-12-08 10:11:58')[0m
  [1m[35m (44.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/orders/4
Completed 302 Found in 144ms (ActiveRecord: 92.1ms)


Started GET "/orders/4" for 127.0.0.1 at 2017-12-08 18:11:58 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 4 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 4[0m
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 5 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 2 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (44.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (12.0ms)
Completed 200 OK in 388ms (Views: 314.9ms | ActiveRecord: 4.0ms)


