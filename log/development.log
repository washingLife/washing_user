  [1m[35m (0.0ms)[0m  [1m[34mSELECT DATABASE() as db[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3820117908132682275', 0);[0m
  [1m[36mActiveRecord::SchemaMigration Load (31.3ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::InternalMetadata Load (15.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3820117908132682275')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (15.6ms)[0m  [1m[35mSHOW CREATE TABLE `addresses`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `categories`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'categories'[0m
  [1m[35m (15.6ms)[0m  [1m[35mSHOW CREATE TABLE `categories_cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'cities'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `cities_workers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'couriers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `couriers_stations`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `items`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `orders`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'orders'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `price_rules`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `prices`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `products`[0m
  [1m[35m (15.6ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'products'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `roles`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'roles'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `stations`[0m
  [1m[35m (15.6ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'stations'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `user_addresses`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'user_addresses'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `users`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'users'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `vouchers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `waybills`[0m
  [1m[35m (15.6ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'waybills'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers`[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW TABLE STATUS LIKE 'workers'[0m
  [1m[35m (0.0ms)[0m  [1m[35mSHOW CREATE TABLE `workers_roles`[0m
Started GET "/" for 127.0.0.1 at 2017-12-22 16:43:50 +0800
  [1m[36mActiveRecord::SchemaMigration Load (32.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (116.0ms)
Started GET "/users/sign_in" for 127.0.0.1 at 2017-12-22 16:44:01 +0800
  Rendered layouts/_menu.html.slim (12.0ms)
Completed 200 OK in 19219ms (Views: 18976.9ms | ActiveRecord: 12.0ms)


Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.slim within layouts/application
  Rendered devise/shared/_links.html.slim (16.0ms)
  Rendered devise/sessions/new.html.slim within layouts/application (558.9ms)
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 979ms (Views: 910.1ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2017-12-22 16:45:00 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dM0JsJWVkyyrSgQ3xH1/9z6G1gaqUeiW0XNOoBEpibeSXvRxqDlYcvoyw6oBLsh7r18SSVIvTC5qIJmflv5KXg==", "user"=>{"email"=>"1026276393@qq.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`email` = '1026276393@qq.com' ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35m (28.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (40.0ms)[0m  [1m[33mUPDATE `users` SET `current_sign_in_at` = '2017-12-22 08:45:01', `last_sign_in_at` = '2017-12-17 08:01:37', `sign_in_count` = 11, `updated_at` = '2017-12-22 08:45:01' WHERE `users`.`id` = 1[0m
  [1m[35m (40.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 861ms (ActiveRecord: 108.5ms)


Started GET "/" for 127.0.0.1 at 2017-12-22 16:45:01 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` ORDER BY `cities`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (8.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (12.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (152.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 572ms (Views: 520.1ms | ActiveRecord: 12.0ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-12-22 16:45:18 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (4.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-22') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (78.2ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (15.6ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  Rendered categories/show.html.slim within layouts/application (302.5ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (0.0ms)
Completed 200 OK in 641ms (Views: 471.9ms | ActiveRecord: 19.6ms)


Started GET "/home/user" for 127.0.0.1 at 2017-12-22 16:45:22 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (74.6ms)
Completed 500 Internal Server Error in 115ms (ActiveRecord: 31.3ms)


  
ActionView::Template::Error (Mysql2::Error: Table 'ruby_course.user_cards' doesn't exist: SHOW FULL FIELDS FROM `user_cards`):
     9:         .panel-body
    10:           table.table
    11:             tr
    12:               th = current_user.user_card.fake_money
    13:             tr
    14:               td
    15:                 | 余额
  
app/views/home/user.html.slim:12:in `_app_views_home_user_html_slim___1390914488_143102820'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (12.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (16.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (1800.1ms)
Started GET "/categories/1" for 127.0.0.1 at 2017-12-22 16:45:38 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (4.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-22') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (0.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  Rendered categories/show.html.slim within layouts/application (72.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 228ms (Views: 206.4ms | ActiveRecord: 4.0ms)


Started GET "/users/sign_in" for ::1 at 2017-12-22 17:27:47 +0800
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
Redirected to http://localhost:3001/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 40ms (ActiveRecord: 5.0ms)


Started GET "/" for ::1 at 2017-12-22 17:28:02 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (9.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (6.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/index.html.slim within layouts/application (127.7ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (9.0ms)
Completed 200 OK in 1376ms (Views: 1251.2ms | ActiveRecord: 16.1ms)


Started GET "/cable" for ::1 at 2017-12-22 17:28:04 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:28:05 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/" for ::1 at 2017-12-22 17:28:21 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (4.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (45.5ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 187ms (Views: 172.5ms | ActiveRecord: 2.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:28:22 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:28:22 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:28:22 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/" for ::1 at 2017-12-22 17:29:53 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (3.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (47.8ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 233ms (Views: 200.2ms | ActiveRecord: 0.0ms)


Started GET "/cable" for ::1 at 2017-12-22 17:29:53 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:29:53 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/home/user" for ::1 at 2017-12-22 17:29:56 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (1.0ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (29.5ms)
  Rendered layouts/_menu.html.slim (13.0ms)
Completed 200 OK in 228ms (Views: 214.3ms | ActiveRecord: 5.0ms)


Started GET "/user_card_charge_settings" for ::1 at 2017-12-22 17:30:04 +0800
Processing by UserCardChargeSettingsController#index as HTML
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.0ms)[0m  [1m[34mSELECT `user_card_charge_settings`.* FROM `user_card_charge_settings`[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (12.0ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (10.0ms)
Completed 200 OK in 191ms (Views: 178.2ms | ActiveRecord: 4.0ms)


Started POST "/user_card_charge_settings/1/pay" for ::1 at 2017-12-22 17:30:07 +0800
Processing by UserCardChargeSettingsController#pay as HTML
  Parameters: {"authenticity_token"=>"OCZFkVWai6u5Mnj7hbVtm7CKwrwhuMXaNZ2xW74+altteW7u3BxSUi3xkXSUBjXFaXRiYdGkrsiyVjP57A96Kg==", "id"=>"1"}
  [1m[36mUserCardChargeSetting Load (2.0ms)[0m  [1m[34mSELECT  `user_card_charge_settings`.* FROM `user_card_charge_settings` WHERE `user_card_charge_settings`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (1.0ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (46.6ms)[0m  [1m[32mINSERT INTO `user_card_logs` (`kind`, `real_money`, `fake_money`, `loggable_type`, `loggable_id`, `user_card_id`, `created_at`, `updated_at`) VALUES (3, 100.0, 120.0, 'UserCardChargeSetting', 1, 1, '2017-12-22 09:30:07', '2017-12-22 09:30:07')[0m
  [1m[35m (40.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (11.0ms)[0m  [1m[33mUPDATE `user_cards` SET `real_money` = 200.0, `fake_money` = 140.0, `updated_at` = '2017-12-22 09:30:07' WHERE `user_cards`.`id` = 1[0m
  [1m[35m (62.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3001/home/user
Completed 302 Found in 302ms (ActiveRecord: 165.9ms)


Started GET "/home/user" for ::1 at 2017-12-22 17:30:07 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (4.0ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (37.1ms)
  Rendered layouts/_menu.html.slim (13.0ms)
Completed 200 OK in 513ms (Views: 473.3ms | ActiveRecord: 9.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:30:08 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:30:08 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:30:08 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/messages" for ::1 at 2017-12-22 17:30:19 +0800
Processing by MessagesController#index as HTML
  Rendering messages/index.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered messages/index.html.slim within layouts/application (6.0ms)
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 175ms (Views: 167.9ms | ActiveRecord: 0.0ms)


Started GET "/categories" for ::1 at 2017-12-22 17:30:23 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (5.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (58.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (11.0ms)
Completed 200 OK in 207ms (Views: 189.6ms | ActiveRecord: 3.0ms)


Started GET "/categories/1" for ::1 at 2017-12-22 17:30:24 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (1.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-22') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (45.8ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (85.8ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (2.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  [1m[36mPrice Load (2.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (8.0ms)
  Rendered categories/show.html.slim within layouts/application (271.9ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (13.0ms)
Completed 200 OK in 658ms (Views: 563.9ms | ActiveRecord: 62.8ms)


Started GET "/orders/new?category=1" for ::1 at 2017-12-22 17:30:28 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (23.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (199.1ms)
  Rendered orders/new.html.slim within layouts/application (213.2ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 399ms (Views: 334.6ms | ActiveRecord: 28.0ms)


Started POST "/orders" for ::1 at 2017-12-22 17:30:32 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"yDmH9YVDHfEZbQuKleIBGqVZPlmhnrtCkp0GBvNFlrC79ZOQow0ViY+RGC54v0SyHc2aQ7oLokV+J3f3xeHj5w==", "order"=>{"category_id"=>"1", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (66.0ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`, `city_id`) VALUES (1, 1, 2, 'new', '2017-12-22 09:30:32', '2017-12-22 09:30:32', 1)[0m
  [1m[35m (29.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (37.5ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (8.9ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 4[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 4 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (18.1ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (17, 'new', 'User', 1, 9, 'Courier', 8, 7, '2017-12-22 09:30:32', '2017-12-22 09:30:32')[0m
  [1m[35m (25.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (49.1ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`courier_status` = 'wuliu_qu_paidan' WHERE `orders`.`id` = 17[0m
Redirected to http://localhost:3001/orders/17
Completed 302 Found in 581ms (ActiveRecord: 256.6ms)


Started GET "/orders/17" for ::1 at 2017-12-22 17:30:33 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"17"}
  [1m[36mOrder Load (4.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 17 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (1.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 17[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 8 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (67.1ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 319ms (Views: 274.7ms | ActiveRecord: 8.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:30:33 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:30:33 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:30:33 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/home/user" for ::1 at 2017-12-22 17:30:41 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (1.0ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (10.0ms)
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 137ms (Views: 129.0ms | ActiveRecord: 1.0ms)


Started GET "/user_card_charge_settings" for ::1 at 2017-12-22 17:30:45 +0800
Processing by UserCardChargeSettingsController#index as HTML
  Rendering user_card_charge_settings/index.html.slim within layouts/application
  [1m[36mUserCardChargeSetting Load (0.0ms)[0m  [1m[34mSELECT `user_card_charge_settings`.* FROM `user_card_charge_settings`[0m
  Rendered user_card_charge_settings/index.html.slim within layouts/application (6.0ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (9.0ms)
Completed 200 OK in 212ms (Views: 200.5ms | ActiveRecord: 1.0ms)


Started GET "/home/user" for ::1 at 2017-12-22 17:34:14 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (0.0ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (11.0ms)
  Rendered layouts/_menu.html.slim (7.0ms)
Completed 200 OK in 163ms (Views: 152.1ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:34:14 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:34:14 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:34:14 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/categories" for ::1 at 2017-12-22 17:34:15 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (3.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (42.1ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (10.0ms)
Completed 200 OK in 271ms (Views: 259.9ms | ActiveRecord: 1.0ms)


Started GET "/categories/1" for ::1 at 2017-12-22 17:34:18 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (1.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-22') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (7.1ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (2.4ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  Rendered categories/show.html.slim within layouts/application (68.6ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (8.0ms)
Completed 200 OK in 259ms (Views: 238.2ms | ActiveRecord: 6.0ms)


Started GET "/orders/new?category=1" for ::1 at 2017-12-22 17:34:19 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"1"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (1.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (21.0ms)
  Rendered orders/new.html.slim within layouts/application (32.0ms)
  Rendered layouts/_menu.html.slim (13.0ms)
Completed 200 OK in 261ms (Views: 250.2ms | ActiveRecord: 1.0ms)


Started POST "/orders" for ::1 at 2017-12-22 17:34:22 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lDtOGW/QsLdV6uujfgSpOEQUWEG/Ap/JdKvsgpHjZh3n91p8SZ64z8MW+AeTWeyQ/ID8W6SXhs6YEZ1zp0cTSg==", "order"=>{"category_id"=>"1", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mUserAddress Load (6.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (10.1ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`, `city_id`) VALUES (1, 1, 2, 'new', '2017-12-22 09:34:22', '2017-12-22 09:34:22', 1)[0m
  [1m[35m (33.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (1.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (4.0ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 2[0m
  [1m[36mAddress Load (4.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (18, 'new', 'User', 1, 9, 'Courier', 6, 2, '2017-12-22 09:34:23', '2017-12-22 09:34:23')[0m
  [1m[35m (25.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (36.0ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`courier_status` = 'wuliu_qu_paidan' WHERE `orders`.`id` = 18[0m
Redirected to http://localhost:3001/orders/18
Completed 302 Found in 217ms (ActiveRecord: 125.8ms)


Started GET "/orders/18" for ::1 at 2017-12-22 17:34:23 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"18"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 18 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 18[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 6 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 2 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (74.1ms)
Completed 500 Internal Server Error in 175ms (ActiveRecord: 5.0ms)


  
ActionView::Template::Error (undefined method `items' for #<Order:0x000000107b2798>):
    49:             th 数量
    50:             th 单价
    51:             th 总价
    52:           - @order.items.each do |item|
    53:             tr
    54:               td = item.product
    55:               td = item.amount
  
app/views/orders/show.html.slim:52:in `_app_views_orders_show_html_slim___991462915_138250520'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (10.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (1225.9ms)
Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:34:27 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:37:43 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:37:43 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started POST "/orders" for ::1 at 2017-12-22 17:37:47 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1i3BzMOERYZg6SfPYWLWmvn+HqAe9yNAQWci+J2YhOODcuqzSgKcf/QqzkBw0Y7EIAC+fe7rSFLGrKBaz6mUkg==", "order"=>{"category_id"=>"1", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (46.5ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`, `city_id`) VALUES (1, 1, 2, 'new', '2017-12-22 09:37:47', '2017-12-22 09:37:47', 1)[0m
  [1m[35m (87.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (1.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (2.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 1 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35m (10.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (19, 'new', 'User', 1, 9, 'Courier', 3, 1, '2017-12-22 09:37:47', '2017-12-22 09:37:47')[0m
  [1m[35m (64.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (133.0ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`courier_status` = 'wuliu_qu_paidan' WHERE `orders`.`id` = 19[0m
Redirected to http://localhost:3001/orders/19
Completed 302 Found in 816ms (ActiveRecord: 432.0ms)


Started GET "/orders/19" for ::1 at 2017-12-22 17:37:47 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"19"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 19 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (2.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (1.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 19[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 3 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 1 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (128.1ms)
Completed 500 Internal Server Error in 281ms (ActiveRecord: 7.9ms)


  
ActionView::Template::Error (undefined method `items' for #<Order:0x00000010bc6190>):
    50:             th 数量
    51:             th 单价
    52:             th 总价
    53:           - @order.items.each do |item|
    54:             tr
    55:               td = item.product
    56:               td = item.amount
  
app/views/orders/show.html.slim:53:in `_app_views_orders_show_html_slim___991462915_140387800'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (10.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (704.9ms)
Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:37:51 +0800
Started GET "/users/sign_in" for ::1 at 2017-12-22 17:44:48 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
Redirected to http://localhost:3001/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 73ms (ActiveRecord: 2.0ms)


Started GET "/cable" for ::1 at 2017-12-22 17:45:02 +0800
Started GET "/" for ::1 at 2017-12-22 17:45:02 +0800
Processing by CategoriesController#index as HTML
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:45:02 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:45:02 +0800
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (7.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (1.0ms)
  Rendered categories/index.html.slim within layouts/application (127.8ms)
Started GET "/cable" for ::1 at 2017-12-22 17:45:02 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:45:03 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (12.0ms)
Completed 200 OK in 1096ms (Views: 929.7ms | ActiveRecord: 7.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:45:03 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:45:03 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:45:03 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/orders/13" for ::1 at 2017-12-22 17:45:10 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 13 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (1.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 13[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 9 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (86.1ms)
Completed 500 Internal Server Error in 155ms (ActiveRecord: 6.0ms)


  
ActionView::Template::Error (undefined method `items' for #<Order:0x0000001166ac18>):
    50:             th 数量
    51:             th 单价
    52:             th 总价
    53:           - @order.items.each do |item|
    54:             tr
    55:               td = item.product
    56:               td = item.amount
  
app/views/orders/show.html.slim:53:in `_app_views_orders_show_html_slim___158414015_145968020'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (702.5ms)
Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:45:14 +0800
Started GET "/orders/13" for ::1 at 2017-12-22 17:46:54 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 13 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 13[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 9 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (94.3ms)
Completed 500 Internal Server Error in 151ms (ActiveRecord: 3.0ms)


  
ActionView::Template::Error (uninitialized constant Order::Item):
    50:             th 数量
    51:             th 单价
    52:             th 总价
    53:           - @order.items.each do |item|
    54:             tr
    55:               td = item.product
    56:               td = item.amount
  
app/views/orders/show.html.slim:53:in `_app_views_orders_show_html_slim___158414015_168141440'
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (6.0ms)
  Rendering E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered E:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-5.0.6/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (678.5ms)
Started GET "/orders/13" for ::1 at 2017-12-22 17:49:03 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 13 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 13[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 9 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  [1m[36mItem Load (0.0ms)[0m  [1m[34mSELECT `items`.* FROM `items` WHERE `items`.`order_id` = 13[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (159.1ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 341ms (Views: 294.9ms | ActiveRecord: 7.0ms)


Started GET "/cable" for ::1 at 2017-12-22 17:49:04 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:49:04 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/orders/13" for ::1 at 2017-12-22 17:51:17 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 13 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 13[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 9 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT `items`.* FROM `items` WHERE `items`.`order_id` = 13[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (113.1ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 279ms (Views: 242.7ms | ActiveRecord: 13.0ms)


Started GET "/cable" for ::1 at 2017-12-22 17:51:17 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:17 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/orders/13" for ::1 at 2017-12-22 17:51:25 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 13 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 13[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 9 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  [1m[36mItem Load (0.0ms)[0m  [1m[34mSELECT `items`.* FROM `items` WHERE `items`.`order_id` = 13[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (34.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 179ms (Views: 167.1ms | ActiveRecord: 1.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:25 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:51:26 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:26 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/orders/19" for ::1 at 2017-12-22 17:51:30 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"19"}
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 19 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 19[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 3 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 1 LIMIT 1[0m
  [1m[36mItem Load (0.0ms)[0m  [1m[34mSELECT `items`.* FROM `items` WHERE `items`.`order_id` = 19[0m
  Rendered orders/show.html.slim within layouts/application (27.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (6.0ms)
Completed 200 OK in 242ms (Views: 230.5ms | ActiveRecord: 2.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:30 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:51:30 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:30 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started DELETE "/orders/19" for ::1 at 2017-12-22 17:51:34 +0800
Processing by OrdersController#destroy as HTML
  Parameters: {"authenticity_token"=>"paPOxZTRuBA2N9bYw8YptitjxmzFJxLMGZEjl6JCqSXw/OW6HVdh6aL0P1fSdXHo8p1msTU7ed6eWqE18HO5VA==", "id"=>"19"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 19 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (36.1ms)[0m  [1m[31mDELETE FROM `orders` WHERE `orders`.`id` = 19[0m
  [1m[35m (45.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3001/categories
Completed 302 Found in 90ms (ActiveRecord: 83.2ms)


Started GET "/categories" for ::1 at 2017-12-22 17:51:35 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (3.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (60.4ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 230ms (Views: 182.7ms | ActiveRecord: 16.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:35 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:51:35 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:51:35 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/home/user" for ::1 at 2017-12-22 17:53:39 +0800
Processing by HomeController#user as HTML
  Rendering home/user.html.slim within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserCard Load (0.0ms)[0m  [1m[34mSELECT  `user_cards`.* FROM `user_cards` WHERE `user_cards`.`user_id` = 1 LIMIT 1[0m
  Rendered home/user.html.slim within layouts/application (27.4ms)
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 153ms (Views: 142.3ms | ActiveRecord: 3.0ms)


Started GET "/categories" for ::1 at 2017-12-22 17:53:41 +0800
Processing by CategoriesController#index as HTML
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  Rendering categories/index.html.slim within layouts/application
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT `cities`.* FROM `cities`[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  Rendered categories/_category_block.html.slim (3.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/_category_block.html.slim (0.0ms)
  Rendered categories/index.html.slim within layouts/application (42.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (9.0ms)
Completed 200 OK in 223ms (Views: 192.1ms | ActiveRecord: 1.0ms)


Started GET "/categories/1" for ::1 at 2017-12-22 17:53:46 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (0.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 1 AND (city_id = 1 and from_date <= '2017-12-22') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 1 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 6 LIMIT 1[0m
  Rendered products/_product.html.slim (26.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 4 LIMIT 1[0m
  Rendered products/_product.html.slim (2.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 5 LIMIT 1[0m
  Rendered products/_product.html.slim (2.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 2 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 3 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (2.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 1 LIMIT 1[0m
  Rendered products/_product.html.slim (4.0ms)
  Rendered categories/show.html.slim within layouts/application (133.1ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 334ms (Views: 289.2ms | ActiveRecord: 9.0ms)


Started GET "/categories/2" for ::1 at 2017-12-22 17:53:48 +0800
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCity Load (0.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mPriceRule Load (1.0ms)[0m  [1m[34mSELECT  `price_rules`.* FROM `price_rules` WHERE `price_rules`.`category_id` = 2 AND (city_id = 1 and from_date <= '2017-12-22') ORDER BY `price_rules`.`from_date` DESC LIMIT 1[0m
  Rendering categories/show.html.slim within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`category_id` = 2 AND `products`.`is_del` = 0 ORDER BY `products`.`updated_at` DESC LIMIT 10 OFFSET 0[0m
  [1m[36mPrice Load (1.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 12 LIMIT 1[0m
  Rendered products/_product.html.slim (6.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 11 LIMIT 1[0m
  Rendered products/_product.html.slim (2.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 9 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 10 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 7 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  [1m[36mPrice Load (0.0ms)[0m  [1m[34mSELECT  `prices`.* FROM `prices` WHERE `prices`.`product_id` = 8 LIMIT 1[0m
  Rendered products/_product.html.slim (3.0ms)
  Rendered categories/show.html.slim within layouts/application (67.1ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (4.0ms)
Completed 200 OK in 202ms (Views: 182.6ms | ActiveRecord: 4.0ms)


Started GET "/orders/new?category=2" for ::1 at 2017-12-22 17:53:50 +0800
Processing by OrdersController#new as HTML
  Parameters: {"category"=>"2"}
  Rendering orders/new.html.slim within layouts/application
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.* FROM `categories` INNER JOIN `categories_cities` ON `categories`.`id` = `categories_cities`.`category_id` WHERE `categories_cities`.`city_id` = 1 AND `categories`.`is_del` = 0[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mUserAddress Load (1.0ms)[0m  [1m[34mSELECT `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`user_id` = 1[0m
  Rendered orders/_form.html.slim (112.2ms)
  Rendered orders/new.html.slim within layouts/application (122.2ms)
  Rendered layouts/_menu.html.slim (13.0ms)
Completed 200 OK in 419ms (Views: 404.7ms | ActiveRecord: 5.0ms)


Started POST "/orders" for ::1 at 2017-12-22 17:53:54 +0800
Processing by OrdersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"YB6TQ8eUeliAkmvB2R2GtvH/vKMOfRHj9ZKMvR1nOHAT0ocm4dpyIBZueGU0QMMeSWsYuRXoCOQZKP1MK8NNJw==", "order"=>{"category_id"=>"2", "user_address_id"=>"2"}, "commit"=>"Create Order"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mUserAddress Load (0.0ms)[0m  [1m[34mSELECT  `user_addresses`.* FROM `user_addresses` WHERE `user_addresses`.`id` = 2 LIMIT 1[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO `orders` (`category_id`, `user_id`, `user_address_id`, `courier_status`, `created_at`, `updated_at`, `city_id`) VALUES (2, 1, 2, 'new', '2017-12-22 09:53:54', '2017-12-22 09:53:54', 1)[0m
  [1m[35m (35.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCity Load (2.0ms)[0m  [1m[34mSELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1[0m
  [1m[36mStation Load (1.0ms)[0m  [1m[34mSELECT `stations`.* FROM `stations` WHERE `stations`.`city_id` = 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT `couriers`.* FROM `couriers` INNER JOIN `couriers_stations` ON `couriers`.`id` = `couriers_stations`.`courier_id` WHERE `couriers_stations`.`station_id` = 2[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'UserAddress' LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_id` = 2 AND `addresses`.`addressable_type` = 'Station' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (9.8ms)[0m  [1m[32mINSERT INTO `waybills` (`order_id`, `status`, `sender_type`, `sender_id`, `from_address_id`, `receiver_type`, `receiver_id`, `to_address_id`, `created_at`, `updated_at`) VALUES (21, 'new', 'User', 1, 9, 'Courier', 6, 2, '2017-12-22 09:53:54', '2017-12-22 09:53:54')[0m
  [1m[35m (24.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (29.3ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`courier_status` = 'wuliu_qu_paidan' WHERE `orders`.`id` = 21[0m
Redirected to http://localhost:3001/orders/21
Completed 302 Found in 287ms (ActiveRecord: 122.4ms)


Started GET "/orders/21" for ::1 at 2017-12-22 17:53:54 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"21"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 21 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mWaybill Load (1.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 21[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 6 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 2 LIMIT 1[0m
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT `items`.* FROM `items` WHERE `items`.`order_id` = 21[0m
  Rendered orders/show.html.slim within layouts/application (68.1ms)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (10.0ms)
Completed 200 OK in 466ms (Views: 428.3ms | ActiveRecord: 7.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:53:55 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:53:55 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:53:55 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Started GET "/orders/14" for ::1 at 2017-12-22 17:54:07 +0800
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"14"}
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT  `orders`.* FROM `orders` WHERE `orders`.`id` = 14 LIMIT 1[0m
  Rendering orders/show.html.slim within layouts/application
  [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mWaybill Load (0.0ms)[0m  [1m[34mSELECT `waybills`.* FROM `waybills` WHERE `waybills`.`order_id` = 14[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mAddress Load (1.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m
  [1m[36mCourier Load (1.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 9 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 7 LIMIT 1[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 9 LIMIT 1[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCourier Load (0.0ms)[0m  [1m[34mSELECT  `couriers`.* FROM `couriers` WHERE `couriers`.`id` = 6 LIMIT 1[0m
  [1m[36mAddress Load (0.0ms)[0m  [1m[34mSELECT  `addresses`.* FROM `addresses` WHERE `addresses`.`id` = 2 LIMIT 1[0m
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT `items`.* FROM `items` WHERE `items`.`order_id` = 14[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  `products`.* FROM `products` WHERE `products`.`id` = 10 LIMIT 1[0m
  Rendered orders/show.html.slim within layouts/application (40.8ms)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 ORDER BY `users`.`id` ASC LIMIT 1[0m
  Rendered layouts/_menu.html.slim (5.0ms)
Completed 200 OK in 187ms (Views: 173.4ms | ActiveRecord: 4.0ms)


Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:54:07 +0800
Started GET "/cable" for ::1 at 2017-12-22 17:54:07 +0800
Started GET "/cable/" [WebSocket] for ::1 at 2017-12-22 17:54:07 +0800
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Subscription class not found: "UserChannel"
Finished "/cable/" [WebSocket] for ::1 at 2017-12-22 17:56:29 +0800
